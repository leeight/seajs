'use strict';(function(f){function l(){f.off("load",m);f.off("fetch",n);j.debug?f.log("Combo is turned off in debug mode"):(f.on("load",m),f.on("fetch",n))}function m(a){var d=[],e=j.comboExcludes;h(a,function(b){var c=t[b];if(c=c.status<c.constructor.STATUS.FETCHING)if(c=!e||!e.test(b))var g=j.comboSyntax||["??",","],c=g[0],g=g[1],c=!(c&&0<b.indexOf(c)||g&&0<b.indexOf(g));c&&d.push(b)});1<d.length&&p(q(d))}function n(a){var d=a.uri;a.requestUri=k[d]||d}function q(a){var d={__KEYS:[]};h(a,function(b){b=
b.replace("://","__").split("/");var c=d;h(b,function(b){c[b]||(c[b]={__KEYS:[]},c.__KEYS.push(b));c=c[b]})});var e=[];h(d.__KEYS,function(b){var c=b;b=d[b];for(var a=b.__KEYS;1===a.length;)c+="/"+a[0],b=b[a[0]],a=b.__KEYS;a.length&&e.push([c.replace("__","://"),r(b)])});return e}function r(a){var d=[];h(a.__KEYS,function(e){var b=r(a[e]);b.length?h(b,function(b){d.push(e+"/"+b)}):d.push(e)});return d}function p(a){var d=j.comboSyntax||["??",","];h(a,function(a){var b=a[0]+"/",c=[],g={};h(a[1],function(b){var a;
a=b.lastIndexOf(".");(a=0<=a?b.substring(a):"")&&(g[a]||(g[a]=[])).push(b)});for(var f in g)g.hasOwnProperty(f)&&c.push(g[f]);h(c,function(a){var c=b+d[0]+a.join(d[1]);if(2E3<c.length)throw Error("The combo url is too long: "+c);h(a,function(a){k[b+a]=c})})});return k}var k={},t=f.cache,j=f.config.data;l();f.on("config",l);var h=[].forEach?function(a,d){a.forEach(d)}:function(a,d){for(var e=0;e<a.length;e++)d(a[e],e,a)};if(j.test){var s=f.test||(f.test={});s.uris2paths=q;s.paths2hash=p}})(seajs);
